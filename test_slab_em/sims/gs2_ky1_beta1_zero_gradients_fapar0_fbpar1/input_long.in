!==============================================================================
!  		GS2 INPUT FILE automatically generated by CodeRunner 
!==============================================================================
!
!  GS2 is a gyrokinetic flux tube initial value turbulence code 
!  which can be used for fusion or astrophysical plasmas.
!  
!  	See http://gyrokinetics.sourceforge.net
!
!  CodeRunner is a framework for the automated running and analysis 
!  of large simulations. 
!
!  	See http://coderunner.sourceforge.net
!
!  Created on 2013-07-23 11:22:33 +0100
!      by CodeRunner version 0.12.11.0
!
!==============================================================================

!==============================
!GENERAL PARAMETERS  
!==============================
&parameters
 beta = 1
 zeff = 1.0 ! Effective ionic charge.
/

&kt_grids_knobs
 grid_option = "single" ! The general layout of the perpendicular grid.
/

!==============================
!  
!==============================
&kt_grids_single_parameters
 aky = 1
 akx = 0.0 
/

!==============================
!  
!==============================
&theta_grid_parameters    ! NB we're normalising to the major radius, R
 
 ntheta = 36 ! Number of points along field line (theta) per 2 pi segment
 nperiod = 1 ! Number of 2 pi segments along equilibrium magnetic field.
 shat = 0  
 ! qinp = 1.38 ! 2/1.44. ! Sets q "when using local toroidal eq"
!!!!!!!! New parameters, as the normalisation has changed
 eps = 0 ! 0.367647058824  ! a / R, where R = 1.70 m is the DIII-D major radius
 ! rmaj = 2.72  ! 1 / eps
 ! r_geo = 2.72  ! 1 / eps
 ! rhoc = 0.5  ! minor radius of surface
 epsl = 0 ! 0.735294117647  ! 2 * L_ref / R = 2 * a / R = 2 * eps
 kp = 1
!!!!!!!!!!!!
 ! pk = 1.44 ! pk = 2 a / q R ! USED ONLY IN S-ALPHA
 ! shift = 0.0 ! shift = -R q**2 dbeta/drho (>0)
/

!==============================
!  
!==============================
&theta_grid_knobs
 equilibrium_option = "s-alpha" ! Controls which geometric assumptions are used in the run.
/


&theta_grid_salpha_knobs
  model_option = "s-alpha"
/


!==============================
!PITCH ANGLE/ENERGY GRID SETUP  
!==============================
&le_grids_knobs
 ngauss = 12 ! Number of untrapped pitch-angles moving in one direction along field line.
 negrid = 16 ! Total number of energy grid points
/

!==============================
!BOUNDARY CONDITIONS  
!==============================
&dist_fn_knobs
 gridfac = 1.0 ! Affects boundary condition at end of theta grid.
 omprimfac = 1.0 
 adiabatic_option = "iphi00=2" ! The form of the adiabatic response (if a species is being modeled as adiabatic).
 g_exb = 0.0 
 nonad_zero = .true. ! If true switches on new parallel boundary condition where h=0 at incoming boundary instead of g=0.
 opt_source = .true.
 boundary_option = "periodic"
/

!==============================
!ALGORITHMIC CHOICES  
!==============================
&fields_knobs
 field_option = "implicit" ! Controls which time-advance algorithm is used for the linear terms.
/

!==============================
!  
!==============================
&knobs
 wstar_units = .false. ! For linear runs only. Evolves each k_y with a different timestep.
 fphi = 1.0 ! Multiplies Phi (electrostatic potential).
 fapar = 0.0 ! Multiplies A_par. Use 1 for finite beta (electromagnetic), 0 otherwise (electrostatic)
 faperp = 0.0 ! Multiplies A_perp. Use 1 for high beta, 0 otherwise. Deprecated: use fbpar instead
 fbpar = 1.0
 delt = 0.0005 ! Time step
 nstep = 20000 ! Maximum number of timesteps
/

!==============================
!  
!==============================
&reinit_knobs
 delt_adj = 2.0 ! When the time step needs to be changed, it is adjusted 
 delt_minimum = 1.0e-06 ! The minimum time step is delt_minimum.
/

!==============================
!  
!==============================
&layouts_knobs
 layout = "lexys" ! 'yxles', 'lxyes', 'lyxes', 'lexys' Determines the way the grids are laid out in memory.
/

!==============================
!COLLISIONS  
!==============================
&collisions_knobs
 collision_model = "none" ! Collision model used in the simulation. Options: 'default', 'none', 'lorentz', 'ediffuse'
/

!==============================
!NONLINEARITY  
!==============================
&nonlinear_terms_knobs
 nonlinear_mode = "off" ! Include nonlinear terms? ('on','off')
! flow_mode = "off" 
 cfl = 0.5 ! The maximum delt < cfl * min(Delta_perp/v_perp)
/

!==============================
!EVOLVED SPECIES  
!==============================
&species_knobs
 nspec = 2 ! Number of kinetic species evolved.
/

!==============================
!SPECIES PARAMETERS 1 
!==============================
&species_parameters_1
 z = 1.0 ! Charge
 mass = 1.0 ! Mass
 dens = 1.0 ! Density	
 temp = 1.0  ! Temperature
  tprim = 0
  fprim = 0
 uprim = 0.0 ! ?
 vnewk = 0.01 ! collisionality parameter
 type = "ion" ! Type of species, e.g. 'ion', 'electron', 'beam'
/

!==============================
! 1 
!==============================
&dist_fn_species_knobs_1
 fexpr = 0.45 ! Temporal implicitness parameter. Recommended value: 0.48
 bakdif = 0.05 ! Spatial implicitness parameter. Recommended value: 0.05
/


!==============================
!SPECIES PARAMETERS 2
!==============================
&species_parameters_2
 z = -1.0 ! Charge
 mass = 0.00028 ! Mass
 dens = 1.0 ! Density	
 temp = 1.0 ! Temperature
  tprim = 0
  fprim = 0
 uprim = 0.0 ! ?
 vnewk = 0.01 ! collisionality parameter
 type = "electron" ! Type of species, e.g. 'ion', 'electron', 'beam'
/

!==============================
! 2
!==============================
&dist_fn_species_knobs_2
 fexpr = 0.45 ! Temporal implicitness parameter. Recommended value: 0.48
 bakdif = 0.05 ! Spatial implicitness parameter. Recommended value: 0.05
/


!==============================
!INITIAL CONDITIONS  
!==============================
&init_g_knobs
 chop_side = .false. ! Rarely needed. Forces asymmetry into initial condition.
 phiinit = 1 ! Average amplitude of initial perturbation of each Fourier mode.
 ginit_option = "single_parallel_mode" ! Sets the way that the distribution function is initialized.
 ikpar_init = 1
 kpar_init = 1
/

!==============================
!DIAGNOSTICS  
!==============================
&gs2_diagnostics_knobs
 print_line = .false. ! Estimated frequencies and growth rates to the screen/stdout
 write_omega = .true. ! If (write_ascii = T) instantaneous omega to output file. Very heavy output
 write_omavg = .false. ! If (write_ascii = T) time-averaged growth rate and frequency to the output file.
 write_eigenfunc = .true. ! If (write_ascii = T) Normalized phi written to runname.eigenfunc

 nsave = 10000 ! Write restart files every nsave timesteps
 nwrite = 500 ! Output diagnostic data every nwrite
 !navg =  ! Any time averages performed over navg
 omegatol = -0.0001 ! The convergence has to be better than one part in 1/omegatol
 omegatinst = 500.0 ! Recommended value: 500.
 save_for_restart = .false. ! Write restart files.
 write_phi_over_time = .true. ! Write entire Phi field to NetCDF file every nwrite.
 write_apar_over_time  = .true.
/

!==============================
!  
!==============================
&general_f0_parameters
 alpha_f0 = "analytic" ! Form of the alpha equilibrium distribution function: "maxwellian", "analytic" or "external"
 energy_0 = 0.01 ! Lower limit of F_alpha for : F_alpha(energy_0)=0.
/

